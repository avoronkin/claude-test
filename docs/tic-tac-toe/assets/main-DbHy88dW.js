(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();class C extends Error{constructor(e){super(e),this.name="TicTacToeError"}}class d extends C{constructor(e){super(e),this.name="InvalidMoveError"}}class L extends C{constructor(e){super(e),this.name="GameCompletedError"}}class g{constructor(e,t,r,s){this._board=e||[[null,null,null],[null,null,null],[null,null,null]],this._currentPlayer=t||"X",this._gameStatus=r||"ongoing",this._winner=s||null}get board(){return this._board.map(e=>[...e])}get currentPlayer(){return this._currentPlayer}get gameStatus(){return this._gameStatus}get winner(){return this._winner}makeMove(e,t){if(this._gameStatus!=="ongoing")throw new L("Cannot make a move on a completed game");if(e<0||e>2)throw new d("Row must be between 0 and 2");if(t<0||t>2)throw new d("Column must be between 0 and 2");if(this._board[e][t]!==null)throw new d(`Cell at position (${e}, ${t}) is already occupied`);const r=this._board.map(w=>[...w]);r[e][t]=this._currentPlayer;const s=this._currentPlayer==="X"?"O":"X",o=this.checkWinner(r),a=o?"won":this.isBoardFull(r)?"draw":"ongoing",u=o;return new g(r,s,a,u)}checkWinner(e){for(let t=0;t<3;t++)if(e[t][0]&&e[t][0]===e[t][1]&&e[t][1]===e[t][2])return e[t][0];for(let t=0;t<3;t++)if(e[0][t]&&e[0][t]===e[1][t]&&e[1][t]===e[2][t])return e[0][t];return e[0][0]&&e[0][0]===e[1][1]&&e[1][1]===e[2][2]?e[0][0]:e[0][2]&&e[0][2]===e[1][1]&&e[1][1]===e[2][0]?e[0][2]:null}isBoardFull(e){for(let t=0;t<3;t++)for(let r=0;r<3;r++)if(e[t][r]===null)return!1;return!0}}const x=document.getElementById("board"),c=document.querySelectorAll(".cell"),y=document.getElementById("player-indicator"),f=document.getElementById("game-message"),h=document.getElementById("new-game-btn"),k=document.querySelector(".game-result"),p=document.getElementById("result-title"),i=document.getElementById("result-message");let l;function m(){l=new g,v(),B(),P()}function v(){const n=l.currentPlayer;y.textContent=n,y.className=n==="X"?"":"player-o";const e=l.board;c.forEach((t,r)=>{const s=Math.floor(r/3),o=r%3,a=e[s][o];t.textContent=a||"",t.className="cell",a==="X"?t.classList.add("x"):a==="O"&&t.classList.add("o"),t.disabled=a!==null}),I()}function I(){const n=l.gameStatus,e=l.currentPlayer;switch(n){case"ongoing":f.textContent=`Player ${e}'s turn - Click any empty cell to make your move`;break;case"won":const t=l.winner;f.textContent=`Game Over! Player ${t} wins!`,E(n,t);break;case"draw":f.textContent="Game Over! It's a draw!",E(n,null);break}}function E(n,e){k.classList.remove("hidden"),n==="won"&&e?(p.textContent="Game Over!",i.textContent=`Player ${e} wins! ðŸŽ‰`,i.className=`winner-${e.toLowerCase()}`,O()):n==="draw"&&(p.textContent="Game Over!",i.textContent="It's a draw! ðŸ¤",i.className="draw"),_()}function P(){k.classList.add("hidden"),i.className=""}function O(){const n=l.board,e=l.winner;if(!e)return;const t=[[[0,0],[0,1],[0,2]],[[1,0],[1,1],[1,2]],[[2,0],[2,1],[2,2]],[[0,0],[1,0],[2,0]],[[0,1],[1,1],[2,1]],[[0,2],[1,2],[2,2]],[[0,0],[1,1],[2,2]],[[0,2],[1,1],[2,0]]];for(const r of t)if(r.every(([o,a])=>n[o][a]===e)){r.forEach(([o,a])=>{const u=o*3+a;c[u].classList.add("winning")});break}}function b(n){const e=n.target,t=parseInt(e.dataset.row||"0"),r=parseInt(e.dataset.col||"0");try{l=l.makeMove(t,r),v(),e.style.transform="scale(0.95)",setTimeout(()=>{e.style.transform=""},100)}catch(s){console.warn("Invalid move:",s),e.style.backgroundColor="#fed7d7",setTimeout(()=>{e.style.backgroundColor=""},200)}}function B(){c.forEach(n=>{n.textContent||(n.disabled=!1)})}function _(){c.forEach(n=>{n.disabled=!0})}function G(n){(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),n.target.click())}document.addEventListener("DOMContentLoaded",()=>{m(),c.forEach(n=>{n.addEventListener("click",b),n.addEventListener("keydown",G)}),h.addEventListener("click",m),h.addEventListener("keydown",n=>{(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),m())}),x.addEventListener("keydown",n=>{const e=document.activeElement,t=Array.from(c).indexOf(e);if(t===-1)return;let r=t;switch(n.key){case"ArrowUp":n.preventDefault(),r=t-3;break;case"ArrowDown":n.preventDefault(),r=t+3;break;case"ArrowLeft":n.preventDefault(),r=t-1;break;case"ArrowRight":n.preventDefault(),r=t+1;break}r>=0&&r<c.length&&c[r].focus()}),c[4].focus()});
